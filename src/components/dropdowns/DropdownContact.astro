---
// Components
import Option from "./Option.astro";

// Layouts
import DropdownLayout from "@/layouts/DropdownLayout.astro";

// i18n
import { getJson, getLangFromUrl } from "@/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const { labels } = getJson(lang);
---

<DropdownLayout id="contact-method" labelText={labels.dropdowns.contact}>
  <Option value="facebook" text="Facebook" />
  <Option value="instagram" text="Instagram" />
  <Option value="twitter" text="Twitter" />
  <Option value="github" text="GitHub" />
</DropdownLayout>

<script>
  import { SOCIAL_NETWORKS } from "@/constants/social-networks";

  type SocialNetworkKey = keyof typeof SOCIAL_NETWORKS;

  const contactMethod = document.getElementById("contact-method");

  contactMethod?.addEventListener("change", (event) => {
    const socialNetworkKey = (event.target as HTMLSelectElement)
      .value as SocialNetworkKey;
    const socialNetwork = SOCIAL_NETWORKS[socialNetworkKey];

    open(socialNetwork, "_blank");
  });
</script>
